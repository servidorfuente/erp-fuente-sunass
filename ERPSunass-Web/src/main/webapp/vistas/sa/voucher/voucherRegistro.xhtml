<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

			<p:blockUI block="FormularioReg" widgetVar="blockElemReg" id="blockElemReg" 
				trigger="btnGuardarVoucher btnEliminarVoucher btnCancelarVoucher">
				#{mensaje.MSJ_BLOCKUI_Proceso}<br />
				<p:graphicImage value="/resources/images/loader03.gif" />
			</p:blockUI>
			
			
	<style type="text/css">
	
		.dtRegistro-th{
		    padding-top: 2px !important;
		    padding-left: 2px !important;
		    padding-right: 2px !important;
		}	
	</style>
			
	<p:outputPanel id="FormularioReg" style="width:auto;" >
			
		<div class="row" align="center">
			<div class="ui-g-12 ui-g-nopad">
				<div class="ui-fluid">
					<p:panelGrid layout="grid" styleClass="ui-panelgrid-blank" 
							columns="3" columnClasses="ui-grid-col-8,ui-grid-col-2,ui-grid-col-2">
						
							<p:spacer width="10"></p:spacer>
							<p:spacer  rendered="#{voucherBean.btnAceptarVisible}" width="10"></p:spacer>
							<p:commandButton id="btnGuardarVoucher" value="Guardar" disabled="false"
							icon="fa fa-save" update="@form, FormHeader"  styleClass="btn-success"
							rendered="#{voucherBean.btnGuardarVisible}"
							actionListener="#{voucherBean.btnGuardar}"					
							/>
			

							
							<p:commandButton id="btnInactivarVoucher" value="Inactivar"
							icon="ui-icon-circle-close"  update="@form, FormHeader"  styleClass="btn-danger"
							rendered="#{voucherBean.btnGuardarInactivarVisible}"
							actionListener="#{voucherBean.btnGuardar}"
							 />
			
							<p:commandButton id="btnEliminarVoucher" value="Eliminar"  styleClass="btn-danger"
							icon="ui-icon-trash"  update="@form, FormHeader" disabled="false"
							rendered="#{voucherBean.btnGuardarEliminarVisible}"
							actionListener="#{voucherBean.btnGuardar}"
							/>		

							<p:commandButton id="btnAceptaVoucher" value="Aceptar"
							icon="fa fa-check-circle-o" update="@form, FormHeader"
							 title="#{mensaje.MSJ_INFO_TIP_ACEPTAR_MAIN}"  styleClass="btn-primary"
							rendered="#{voucherBean.btnAceptarVisible}"
							actionListener="#{voucherBean.btnAceptar}"
							 />							
							<p:commandButton id="btnCancelarVoucher" value="Cancelar"  styleClass="btn-primary"
							icon="fa fa-times-circle-o" update="@form, FormHeader"
							 title="#{mensaje.MSJ_INFO_TIP_CANCELAR_MAIN}"
							rendered="#{voucherBean.btnCancelarVisible}"
							actionListener="#{voucherBean.btnCancelar}"
							/>							
																						
					</p:panelGrid>					
				</div>
			</div>
		</div>
		<div class="customHr">.</div>				
							
			<p:fieldset legend="Información General" toggleSpeed="500" toggleable="true" >		
																				
				<div id="divConfigVoucherInfoGen"  class="ui-g">
					<div class="ui-g-12 ui-g-nopad">
						<div class="ui-fluid">												
										
							<p:panelGrid  layout="grid" styleClass="ui-panelgrid-blank" columns="4"
								columnClasses="ui-grid-col-3,ui-grid-col-4,ui-grid-col-4,ui-grid-col-1"								
							>							
								<p:column >				
									<p:outputLabel styleClass="estiloLabelForm"  
										value="Periodo"/>		
									<p:inputMask  value="#{voucherBean.registro.period}"  
										readonly="#{voucherBean.componentesReadonly}"
														mask="9999-99" ></p:inputMask>							
												
	                                <p:outputLabel  value="Compañia: " styleClass="estiloLabelForm"  />
	                                <p:selectOneMenu  value="#{voucherBean.registro.companyowner}"
	                                    	tabindex="1"               
	                                    	style="#{voucherBean.componentesReadonly ? 'pointer-events: none;': ''}"                                                          	
	                                    	autoWidth="false">                                    	
	                                        <p:ajax event="change" process="@this"  />
	                                        <f:selectItem itemLabel="--Seleccione--" itemValue="" noSelectionOption="true" />
	                                        <f:selectItems value="#{voucherBean.listaCompaniaSocio}" var="cmbElem"
	                                                       itemLabel="#{cmbElem.description}" itemValue="#{cmbElem.companyowner}"
	                                        />
	                                </p:selectOneMenu>                                  
	                                <p:outputLabel  value="Libro Contable " styleClass="estiloLabelForm"  />
	                                <p:selectOneMenu  value="#{voucherBean.registro.ledger}"
	                                    	tabindex="1"        
	                                    	style="#{voucherBean.componentesReadonly ? 'pointer-events: none;': ''}"                                                                 	
	                                    	autoWidth="false">                                    	
	                                        <p:ajax event="change" process="@this"  />
	                                        <f:selectItem itemLabel="--Seleccione--" itemValue="" noSelectionOption="true" />
	                                        <f:selectItems value="#{voucherBean.listaLibroContable}" var="cmbElem"
	                                                       itemLabel="#{cmbElem.localName}" itemValue="#{cmbElem.ledger}"
	                                        />
	                                </p:selectOneMenu>  
	                                
	                                <p:outputLabel  value="Unidad de Negocio" styleClass="estiloLabelForm"  />
	                                <p:selectOneMenu  value="#{voucherBean.registro.businessUnit}"
	                                    	tabindex="1"        
	                                    	style="#{voucherBean.componentesReadonly ? 'pointer-events: none;': ''}"                                                                 	
	                                    	autoWidth="false">                                    	
	                                        <p:ajax event="change" process="@this"  />
	                                        <f:selectItem itemLabel="--Seleccione--" itemValue="" noSelectionOption="true" />
	                                        <f:selectItems value="#{voucherBean.listaUnidadNegocio}" var="cmbElem"
	                                                       itemLabel="#{cmbElem.descripcionLocal}" itemValue="#{cmbElem.unidadNegocio}"
	                                        />
	                                </p:selectOneMenu>  
                      				<p:outputLabel  value="Departamento" 
                      						rendered="false"	styleClass="estiloLabelForm"  />
	                                <p:selectOneMenu  value="#{voucherBean.registro.department}"
	                                    	tabindex="1"   rendered="false"     
	                                    	style="#{voucherBean.componentesReadonly ? 'pointer-events: none;': ''}"                                                                 	
	                                    	autoWidth="false">                                    	
	                                        <p:ajax event="change" process="@this"  />
	                                        <f:selectItem itemLabel="--Seleccione--" itemValue="" noSelectionOption="true" />
	                                        <f:selectItems value="#{voucherBean.listaDepartmento}" var="cmbElem"
	                                                       itemLabel="#{cmbElem.description}" itemValue="#{cmbElem.department}"
	                                        />
	                                </p:selectOneMenu>  
	                                	                                
	                                																						 					
								</p:column>																				
								<p:column style="padding:0px !important;">																																		
									<p:outputLabel  styleClass="estiloLabelForm"  
									value="Voucher"/>																
									<p:panelGrid  layout="grid" 
										styleClass="ui-panelgrid-blank"  columns="2"
										 style="margin-left:-10px; margin-top:-5px;margin-bottom:-5px;"
										columnClasses="ui-grid-col-7,ui-grid-col-5"
										>	
	                                    <p:selectOneMenu  value="#{voucherBean.tipoVoucherActual}"
	                                    	tabindex="1"         
	                                    	style="#{voucherBean.componentesReadonly ? 'pointer-events: none;': ''}"                                                                	
	                                    	autoWidth="false">                                    	
	                                        <p:ajax event="change" process="@this"  />
	                                        <f:selectItem itemLabel="--Todos--" itemValue="" noSelectionOption="true" />
	                                        <f:selectItems value="#{voucherBean.listaVoucherReg}" var="cmbElem"
	                                                       itemLabel="(#{cmbElem.voucherManual}) - #{cmbElem.description}" itemValue="#{cmbElem.voucherManual}"
	                                        />
	                                    </p:selectOneMenu>
	                                    																														

										<p:inputText																			
											value="#{voucherBean.numeroVoucherActual}"
											readonly="true"		placeholder="AUTOGENERADO"																
											>
										</p:inputText>																																			
									</p:panelGrid>	
									
									<p:outputLabel  styleClass="estiloLabelForm"  
									value="Moneda"/>																
									<p:panelGrid  layout="grid" 
										styleClass="ui-panelgrid-blank"  columns="2"
										 style="margin-left:-10px; margin-top:-5px;margin-bottom:-5px;"
										columnClasses="ui-grid-col-7,ui-grid-col-5"
										>																					
	                                    <p:selectOneMenu  value="#{voucherBean.registro.currency}"
	                                    	tabindex="1"         
	                                    	style="#{voucherBean.componentesReadonly ? 'pointer-events: none;': ''}"                                                                	
	                                    	autoWidth="false">                                    	
	                                        <p:ajax event="change" process="@this"  />
	                                        <f:selectItem itemLabel="--Todos--" itemValue="" noSelectionOption="true" />
	                                        <f:selectItems value="#{voucherBean.listaMonedaReg}" var="cmbElem"
	                                                       itemLabel="#{cmbElem.descripcionCorta}" itemValue="#{cmbElem.monedaCodigo}"
	                                        />
	                                    </p:selectOneMenu>					
										<p:inputText																			
											rendered="false"
											readonly="#{voucherBean.componentesReadonly}"																		
											>
										</p:inputText>																																			
									</p:panelGrid>	
											
									<p:outputLabel styleClass="estiloLabelForm"  
									value="Fecha T.C."/>																
									<p:panelGrid  layout="grid" 
										styleClass="ui-panelgrid-blank"  columns="3"
										 style="margin-left:-10px; margin-top:-5px;margin-bottom:-5px;"
										columnClasses="ui-grid-col-5,ui-grid-col-2,ui-grid-col-5"
										>																					
										<p:calendar value="#{voucherBean.registro.exchangerateperiod}"
											locale="es" readonly="#{voucherBean.componentesReadonly}"
											mask="true"
											style="#{voucherBean.componentesReadonly ? 'pointer-events: none; cursor: default;': ''}"
											pattern="#{label.PATTERN_DATE}"
												>
											<p:ajax event="dateSelect" process="@this" 
												listener="#{voucherBean.onCambioFechaTipoCambio}" 
												update="inTipoCambio"
												/>
											<p:ajax event="blur"  process="@this" 
												listener="#{voucherBean.onCambioFechaTipoCambio}" 
												update="inTipoCambio" />
										</p:calendar>	
										<p:outputLabel  styleClass="estiloLabelForm"  
												value="T.C."/>															
										<p:inputNumber id="inTipoCambio"	decimalPlaces="4" decimalSeparator="."	thousandSeparator=","																
											value="#{voucherBean.registro.exchangerate}"
											readonly="#{voucherBean.componentesReadonly}"																		
											>
										</p:inputNumber>																																			
									</p:panelGrid>	
									
									<p:panelGrid  layout="grid" 
										styleClass="ui-panelgrid-blank"  columns="2"
										 style="margin-left:-10px; margin-top:-5px;margin-bottom:-5px;"
										columnClasses="ui-grid-col-6,ui-grid-col-6"
										>	
										<p:column>
											<p:outputLabel styleClass="estiloLabelForm"  
												value="Fecha"/>
														
											<p:calendar value="#{voucherBean.registro.voucherDate}"
												locale="es" readonly="#{voucherBean.componentesReadonly}"
												mask="true"
												style="#{voucherBean.componentesReadonly ? 'pointer-events: none; cursor: default;': ''}"
												pattern="#{label.PATTERN_DATE}"
														>
													<p:ajax event="dateSelect" process="@this" />
													<p:ajax event="blur"  process="@this"/>
											</p:calendar>										
										</p:column>
										<p:column>
											<p:outputLabel styleClass="estiloLabelForm"  
												value="Fecha Valor"/>
														
											<p:calendar value="#{voucherBean.registro.valueDate}"
												locale="es"  readonly="#{voucherBean.componentesReadonly}"
												mask="true"
												readonlyInput="#{voucherBean.componentesReadonly}"
												style="#{voucherBean.componentesReadonly ? 'pointer-events: none; cursor: default;': ''}"
												pattern="#{label.PATTERN_DATE}"
														>
													<p:ajax event="dateSelect" process="@this" />
													<p:ajax event="blur"  process="@this"/>
											</p:calendar>										
										</p:column>
									</p:panelGrid>											

									
									<p:panelGrid  layout="grid" 
										styleClass="ui-panelgrid-blank"  columns="2"
										 style="margin-left:-10px; margin-top:-5px;margin-bottom:-5px;"
										columnClasses="ui-grid-col-6,ui-grid-col-6"
										>	
										<p:column>
											<p:outputLabel styleClass="estiloLabelForm"  
												value="Número Interno"/>				
											<p:inputText																
													value="#{voucherBean.registro.internalNumber}" maxlength="10"
													readonly="#{voucherBean.componentesReadonly}"																		
													>
											</p:inputText>											
										</p:column>										
										<p:column>
											<p:outputLabel styleClass="estiloLabelForm"  
												value="Unidad de Replicación"/>				
											<p:inputText																
													value="#{voucherBean.registro.replicationUnit}" 
													readonly="true"																		
													>
											</p:inputText>											
										</p:column>
									</p:panelGrid>	
																											
								</p:column>
								<p:column>	
									<p:outputLabel styleClass="estiloLabelForm"  
									value="Estado"/>
									<br  style="#{voucherBean.componentesReadonly ? 'display: block;' : 'display: none;'}" />
									<p:outputLabel value="#{voucherBean.seleccion.statusDesc}"	
										rendered="#{voucherBean.componentesReadonly}"
									styleClass="#{voucherBean.registro.status eq constant.VOUCHER_ESTADO_ABIERTO  ? 'colTableStyleYellow01':
										voucherBean.registro.status eq constant.VOUCHER_ESTADO_TERMINADO ? 'colTableStyleBlue01':
										voucherBean.registro.status eq constant.VOUCHER_ESTADO_APROBADO ? 'colTableStyleGreen01':
										voucherBean.registro.status eq constant.VOUCHER_ESTADO_MAYORIZADO  ? 'colTableStyleOrange01':
										voucherBean.registro.status eq constant.VOUCHER_ESTADO_ERRADO ? 'colTableStyleRed01':
										voucherBean.registro.status eq constant.VOUCHER_ESTADO_RECHAZADO  ? 'colTableStyleRed02':
										voucherBean.registro.status eq constant.VOUCHER_ESTADO_TRANSFERIDO ? 'colTableStyleGreen01':
										voucherBean.registro.status eq constant.VOUCHER_ESTADO_ANULADO ? 'colTableStyleRed01':'--'
										}"		
									style="font-weight:bold;"				
									/>	
									<br />
									<p:selectOneMenu autoWidth="false"					
											rendered="#{!voucherBean.componentesReadonly}"						
											value="#{voucherBean.registro.status}"		
											style="pointer-events: none; cursor: default;"
																									
											>
											<f:selectItem itemLabel="#{label.lblTodos}" noSelectionOption="true" />																											
											<f:selectItems  value="#{voucherBean.listaEstado}"  
														var="elem" itemValue="#{elem.estadoCodigo}"  itemLabel="#{elem.descripcion}"
														 />												
											<p:ajax event="change" process="@form" 	 />		
									</p:selectOneMenu>	
																																					
									<p:outputLabel styleClass="estiloLabelForm"  
										value="Descripción"/>
									<p:inputTextarea																			
											value="#{voucherBean.registro.vouchertitle}"
											readonly="#{voucherBean.componentesReadonly}"		
											style="height:70px;"																
											>
										<p:ajax  event="blur"  listener="#{voucherBean.onCambioDescripcionVoucherReg}" 
											process="@form"  update="dtVoucherDetail"	>
										</p:ajax>
										
									</p:inputTextarea>
									<p:outputLabel styleClass="estiloLabelForm"  
									value="Comentario"/>
									<p:inputTextarea																			
											value="#{voucherBean.registro.vouchercomments}"
											readonly="#{voucherBean.componentesReadonly}"		
											style="height:70px;"																
											>
									</p:inputTextarea>																											
								</p:column>	
								<p:column>
									<p:spacer height="10" width="10"/>
									<p:commandButton  value="" 
										rendered="false"
										actionListener="#{voucherBean.btnBuscar}"
										onstart="PF('dtElemTable').paginator.setPage(0);" 
										process="@form"
										icon="fa fa-search" tabindex="5"
										style="width: 100%; height: 30px;"
										title="#{mensaje.MSJ_INFO_TIP_BUSCAR_MAIN}"
									/>
									
								</p:column>
							
							</p:panelGrid>
							
						</div>
					</div>
				</div>
				<div class="customHr">.</div>			
				<p:outputPanel  rendered="#{voucherBean.modoNew or voucherBean.modoUpdate}"  styleClass="row" align="center">
						<p:remoteCommand  name="rmActualizarMontos"  process="@form"
								update="#{p:component('pgResumenDetalleLocal')} 
								#{p:component('pgResumenDetalleExt')}"
									actionListener="#{voucherBean.actualizarSumaMontoDetalle}"
										  >
						</p:remoteCommand>	
					
						<p:remoteCommand  name="rmCambiarMontoLocal"  process="@form"
								update="#{p:component('inMontDolar')}"
									actionListener="#{voucherBean.onCambiarMontoLocal}"
										  >
						</p:remoteCommand>	
						<p:remoteCommand  name="rmCambiarMontoExt"  process="@form"
								update="#{p:component('inMontLocal')}"
									actionListener="#{voucherBean.onCambiarMontoExt}"
										  >
						</p:remoteCommand>	
																	
					<div class="ui-g-12 ui-g-nopad">
						<div class="ui-fluid">
							<p:panelGrid layout="grid" styleClass="ui-panelgrid-blank" 
									columns="3" columnClasses="ui-grid-col-2,ui-grid-col-8,ui-grid-col-2">
																									
									<p:commandButton  value="Agregar"
									icon="fa fa-plus" update="#{p:component('dtVoucherDetail')}"  styleClass="btn-primary"
									rendered="true" process="@form"
									actionListener="#{voucherBean.btnAgregarVoucherDetalle}"					
									/>
									<p:spacer width="10"></p:spacer>								
									<p:spacer width="10"></p:spacer>																		
																								
							</p:panelGrid>					
						</div>
					</div>
					
					<!--  DETALLE EDITAR   -->
					<p:dataTable  var="vElemVoucherDet"		id="dtVoucherDetail"	widgetVar="dtVoucherDetail"				
							value="#{voucherBean.listaVoucherDetalleReg}"		
							rendered="#{voucherBean.modoNew or voucherBean.modoUpdate}"					
							reflow="true"							
							rowIndexVar="index"
							style="font-size:12px;"			tableStyle="width:auto;"															
							emptyMessage="#{mensaje.MSJ_WARN_busquedaVacia}">								
							
							<f:facet name="header"> Detalle </f:facet>
							
							<p:column headerText="N°" width="8%" styleClass="dtRegistro-th"	 >
									<h:outputText value="#{index + 1}"
										rendered="#{voucherBean.modoView}"  />
									
									<h:outputText value="#{vElemVoucherDet.voucherline le 0 ? 
										'Nueva: '.concat((vElemVoucherDet.voucherline*-1)): vElemVoucherDet.voucherline}" 
										rendered="#{!voucherBean.modoView}"/>
							</p:column>								
							<p:column headerText="Acción" width="10%" style="text-align:center" styleClass="dtRegistro-th"	 >
								<p:panelGrid layout="grid" styleClass="ui-panelgrid-blank" 
									columns="2" columnClasses="ui-grid-col-3,ui-grid-col-9">
									<p:commandButton
										icon="fa fa-trash" update="#{p:component('dtVoucherDetail')}"  styleClass="btn-primary"
										rendered="true" process="@form" 
										style="padding-right:5px; height:34px;"
										title="Permite quitar un elemento"
										actionListener="#{voucherBean.btnRemoverVoucherDetalle(vElemVoucherDet)}"					
									/>	
									
				                    <p:menuButton value="Opciones"  styleClass="btn-primary" >
				                        <p:menuitem value="Cuenta" icon="fa fa-file-o"
				                        	actionListener="#{voucherBean.iniciarSeleccionCuentasVoucherDetReg(vElemVoucherDet)}"	/>
				                        <p:menuitem value="Persona" icon="fa fa-user"
				                        	actionListener="#{voucherBean.iniciarSeleccionPersonaVoucherDetReg(vElemVoucherDet)}"/>
				                        <p:menuitem value="Centro de Costo" icon="fa fa-cubes"
				                        	actionListener="#{voucherBean.iniciarSeleccionCcostoVoucherDetReg(vElemVoucherDet)}"
				                        	disabled="false" 
				                        />				                    
				                         <p:menuitem value="Proyecto" icon="fa fa-cubes" rendered="false"
				                        />
				                         <p:menuitem value="Flujo de Caja" icon="fa fa-calculator"				                         
				                         	actionListener="#{voucherBean.iniciarSeleccionFlujoCajaVoucherDetReg(vElemVoucherDet)}"
				                        	disabled="false" 
				                        />
				                    </p:menuButton>
								</p:panelGrid>	
							</p:column>	
														
				
							<p:column headerText="Cuenta"  styleClass="dtRegistro-th"	
								style="font-weight: bold; background-color: #b8b8d4;"  >
								<f:facet name="header">Cuenta
								</f:facet>	
								<p:inputText title="Desc: #{vElemVoucherDet.string1}"
									value="#{vElemVoucherDet.account}"																																		
									>												
								</p:inputText>	
								<h:outputText rendered="false" 
									value="#{vElemVoucherDet.account}"																																		
									>												
								</h:outputText>		
							</p:column>
							<p:column headerText="Persona"  styleClass="dtRegistro-th"	 >
								<f:facet name="header">Persona
								</f:facet>	
								<p:panelGrid layout="grid" styleClass="sinpadding ui-panelgrid-blank" 
									columns="2" columnClasses="ui-grid-col-10,ui-grid-col-2">
									<p:inputText id="itVoucDetPersona" title="Desc: #{vElemVoucherDet.string2}"
										value="#{vElemVoucherDet.vendor}"	readonly="true"																																	
										>											
									</p:inputText>
									<p:commandButton icon="fa fa-close" process="@form"
										update="itVoucDetPersona" style="height:34px;"
										title="limpiar Valor"
										actionListener="#{voucherBean.removerPersonaVoucherDetalleReg(vElemVoucherDet)}"
										>
									</p:commandButton>
									
								</p:panelGrid>	
										
							</p:column>
							<p:column headerText="Documento/Factura"  styleClass="dtRegistro-th"	 >
								<f:facet name="header">Documento/Cheque
								</f:facet>	
								<p:inputText
									value="#{vElemVoucherDet.invoice}"																																		
									maxlength="50"  >												
								</p:inputText>		
							</p:column>					
							<p:column headerText="Fecha"  styleClass="dtRegistro-th"	  >
								<f:facet name="header">Fecha
								</f:facet>			
								<p:calendar value="#{vElemVoucherDet.variabledate}"
									locale="es" readonly="#{voucherBean.componentesReadonly}"									
									pattern="#{label.PATTERN_DATE}"
												>
									<p:ajax event="dateSelect" process="@form" />									
								</p:calendar>																			
								
							</p:column>													
							<p:column headerText="Monto Local"  styleClass="dtRegistro-th"	
							>					
								<p:inputNumber id="inMontLocal" value="#{vElemVoucherDet.localamount}"  
									decimalSeparator="."  thousandSeparator=","																		
 								>		
 									<p:ajax  event="blur"  onstart="rmActualizarMontos();"
 										listener="#{voucherBean.onCambiarMontoLocal}" 
 											update="inMontDolar"
 										> 										
 									</p:ajax>													
								</p:inputNumber>
							</p:column>	
							<p:column headerText="Monto Dolar" styleClass="dtRegistro-th"		 >					
								<p:inputNumber  id="inMontDolar" value="#{vElemVoucherDet.dollaramount}"
									decimalSeparator="."  thousandSeparator=","														
									>		
									<p:ajax  event="blur"  onstart="rmActualizarMontos();"
										listener="#{voucherBean.onCambiarMontoExt}" 
 											update="inMontLocal" 
										>
									</p:ajax>																
								</p:inputNumber>					
							</p:column>					
							<p:column headerText="Centro Costo" styleClass="dtRegistro-th"	  >								
	
								<p:panelGrid layout="grid" styleClass="sinpadding ui-panelgrid-blank" 
									columns="2" columnClasses="ui-grid-col-10,ui-grid-col-2">
									<p:inputText id="itVoucDetCcosto"
										value="#{vElemVoucherDet.costCenter}"	title="Desc: #{vElemVoucherDet.string3}"																																	
										 readonly="true" >											
									</p:inputText>	
									<p:commandButton icon="fa fa-close" process="@form"
										update="itVoucDetCcosto" style="height:34px;"
										title="limpiar Valor"
										actionListener="#{voucherBean.removerCcostoVoucherDetalleReg(vElemVoucherDet)}"
										>
									</p:commandButton>
									
								</p:panelGrid>	
																
							</p:column>						
			                <p:column headerText="Descripción" styleClass="dtRegistro-th"	 >
								<p:inputText
									value="#{vElemVoucherDet.description}"																																		
									>												
								</p:inputText>	
			                </p:column>
			                <p:column headerText="Proyecto" styleClass="dtRegistro-th"	 >
								<p:selectOneMenu autoWidth="false" 										
											filter="true" filterMatchMode="contains"
											value="#{vElemVoucherDet.sucursal}"																
											>
											<f:selectItem itemLabel="#{label.lblTodos}" noSelectionOption="true" />																											
											<f:selectItems  value="#{voucherBean.listaProyectosReg}"  
														var="elem" itemValue="#{elem.afe}"  itemLabel="#{elem.localname}"
														 />												
											<p:ajax event="change" process="@form" 	 />		
								</p:selectOneMenu>	
			                </p:column>				                
			                <p:column headerText="Sucursal" styleClass="dtRegistro-th"	 >
								<p:selectOneMenu autoWidth="false" 											
											filter="true" filterMatchMode="contains"
											value="#{vElemVoucherDet.sucursal}"																
											>
											<f:selectItem itemLabel="#{label.lblTodos}" noSelectionOption="true" />																											
											<f:selectItems  value="#{voucherBean.listaSucursalReg}"  
														var="elem" itemValue="#{elem.sucursal}"  itemLabel="#{elem.descripcionLocal}"
														 />												
											<p:ajax event="change" process="@form" 	 />		
								</p:selectOneMenu>	
			                </p:column>	
							<p:column headerText="Flujo de Caja" styleClass="dtRegistro-th"	  >		
								<p:panelGrid layout="grid" styleClass="sinpadding ui-panelgrid-blank" 
									columns="2" columnClasses="ui-grid-col-10,ui-grid-col-2">
									<p:inputText id="itVoucDetFlujoCaja"
										value="#{vElemVoucherDet.cashFlowCode}"	title="Desc: #{vElemVoucherDet.string4}"																																	
										 readonly="true" >											
									</p:inputText>	
									<p:commandButton icon="fa fa-close" process="@form"
										update="itVoucDetFlujoCaja" style="height:34px;"
										title="limpiar Valor"
										actionListener="#{voucherBean.removerFlujoCajaVoucherDetalleReg(vElemVoucherDet)}"
										>
									</p:commandButton>
									
								</p:panelGrid>														
	
							</p:column>					                
			                
				       		 <f:facet name="footer">
				       		 	<div class="customHr"  style="    line-height: 3px;" >.</div>	
								<p:panelGrid  id="pgResumenDetalleLocal" layout="grid" styleClass="ui-panelgrid-blank" 
										columns="7" columnClasses="ui-grid-col-1,ui-grid-col-2,
										ui-grid-col-2,ui-grid-col-2,ui-grid-col-2,ui-grid-col-1,ui-grid-col-2">
																																			
										<p:spacer width="5"></p:spacer>
										<p:outputLabel value="Total Líneas: #{voucherBean.listaVoucherDetalleReg.size()} "
											>
										</p:outputLabel>										
										<p:outputLabel value="Total Moneda Local: "
											>
										</p:outputLabel>
										<p:outputLabel styleClass="colTableStyleBlue01"	style="font-weight:bold;"																	
												value="#{voucherBean.valSumaMontoDetalleLocalDebe}"
												>
											<f:convertNumber pattern="#{label.PATTERN_NUM_2DEC}" locale="en"/>
										</p:outputLabel>
										<p:outputLabel styleClass="colTableStyleRed01"	style="font-weight:bold;"																	
												value="#{voucherBean.valSumaMontoDetalleLocalHaber}"
												>
											<f:convertNumber pattern="#{label.PATTERN_NUM_2DEC}" locale="en"/>
										</p:outputLabel>
										<p:outputLabel	style="font-weight:bold;"																	
												value="#{voucherBean.valSumaMontoDetalleLocal}"
												>
											<f:convertNumber pattern="#{label.PATTERN_NUM_2DEC}" locale="en"/>
										</p:outputLabel>
										<p:spacer width="10"></p:spacer>																		
																									
								</p:panelGrid>		
								<p:panelGrid id="pgResumenDetalleExt" layout="grid" styleClass="ui-panelgrid-blank" 
										columns="7" columnClasses="ui-grid-col-1,ui-grid-col-2,
										ui-grid-col-2,ui-grid-col-2,ui-grid-col-2,ui-grid-col-1,ui-grid-col-2">
																																			
										<p:spacer width="5"></p:spacer>
										<p:spacer width="5"></p:spacer>										
										<p:outputLabel value="Total Moneda Dólar: "
											>
										</p:outputLabel>
										<p:outputLabel	styleClass="colTableStyleBlue01" style="font-weight:bold;"																	
												value="#{voucherBean.valSumaMontoDetalleExtDebe}"
												>
											<f:convertNumber pattern="#{label.PATTERN_NUM_2DEC}" locale="en"/>
										</p:outputLabel>
										<p:outputLabel	styleClass="colTableStyleRed01" style="font-weight:bold;"																												
												value="#{voucherBean.valSumaMontoDetalleExtHaber}"
												>
											<f:convertNumber pattern="#{label.PATTERN_NUM_2DEC}" locale="en"/>
										</p:outputLabel>
										<p:outputLabel	style="font-weight:bold;"																	
												value="#{voucherBean.valSumaMontoDetalleExt}"
												>
											<f:convertNumber pattern="#{label.PATTERN_NUM_2DEC}" locale="en"/>
										</p:outputLabel>
										<p:spacer width="10"></p:spacer>																		
																									
								</p:panelGrid>													       		 
				       		 </f:facet>			                	
						</p:dataTable>		
						
			
				</p:outputPanel>				
											
				
				<!--  DETALLE VER   -->
																													
					<p:dataTable  var="vElemVoucherDet"							
							value="#{voucherBean.listaVoucherDetalleReg}"		
							rendered="#{voucherBean.modoView or voucherBean.modoDelete}"					
							reflow="true"							
							rowIndexVar="index"
							style="font-size:13px;"			tableStyle="width:auto"			
							emptyMessage="#{mensaje.MSJ_WARN_busquedaVacia}">								
							
							<f:facet name="header"> Detalle </f:facet>
							
							<p:column headerText="N°" width="5%" style="height: 30px;text-align:center" >
									<h:outputText value="#{index + 1}" />
							</p:column>					
							<p:column headerText="Cuenta"  
								style="font-weight: bold; background-color: #b8b8d4; text-align:center; "  >
								<f:facet name="header">Cuenta
								</f:facet>	
								<h:outputText
									value="#{vElemVoucherDet.account}"																																		
									>												
								</h:outputText>		
							</p:column>
							<p:column headerText="Persona"   >
								<f:facet name="header">Persona
								</f:facet>	
								<h:outputText
									value="#{vElemVoucherDet.vendor}"																																		
									>											
								</h:outputText>		
							</p:column>
							<p:column headerText="Documento/Factura"   >
								<f:facet name="header">Documento/Cheque
								</f:facet>	
								<h:outputText
									value="#{vElemVoucherDet.invoice}"																																		
									>												
								</h:outputText>		
							</p:column>					
							<p:column headerText="Fecha"    >
								<f:facet name="header">Fecha
								</f:facet>														
								<h:outputText
									value="#{vElemVoucherDet.variabledate}"
									>
									<f:convertDateTime pattern="dd/MM/yyyy" locale="es"/>
								</h:outputText>
							</p:column>			
							<p:column headerText="Monto Local (Debe)" 
								style="font-weight: bold; text-align:right; " >					
								<h:outputText value="#{vElemVoucherDet.localamount}"
									rendered="#{vElemVoucherDet.localamount ge 0}" 									
									styleClass="colTableStyleBlue01"
									>
									<f:convertNumber pattern="#{label.PATTERN_NUM_2DEC}" locale="en"/>
								</h:outputText>					
							</p:column>	
							<p:column headerText="Monto Local (Haber)" style="font-weight: bold; text-align:right; " >					
								<h:outputText value="#{(vElemVoucherDet.localamount*(-1))}"
									rendered="#{vElemVoucherDet.localamount lt 0}"
									styleClass="colTableStyleRed01"  
									>
									<f:convertNumber pattern="#{label.PATTERN_NUM_2DEC}" locale="en"/>
								</h:outputText>					
							</p:column>	
														
							<p:column headerText="Monto Dolar (Debe)" 
								style="font-weight: bold; text-align:right; ">					
								<h:outputText value="#{vElemVoucherDet.dollaramount}" 
									rendered="#{vElemVoucherDet.localamount ge 0}" 									
									styleClass="colTableStyleBlue01"
									>
									<f:convertNumber pattern="#{label.PATTERN_NUM_2DEC}" locale="en"/>
								</h:outputText>					
							</p:column>				
							<p:column headerText="Monto Dolar (Haber)" 
								style="font-weight: bold; text-align:right; " >					
								<h:outputText value="#{ (vElemVoucherDet.dollaramount*(-1))}"
									rendered="#{vElemVoucherDet.localamount lt 0}"
									styleClass="colTableStyleRed01"  
								 	>
									<f:convertNumber pattern="#{label.PATTERN_NUM_2DEC}" locale="en"/>
								</h:outputText>					
							</p:column>																								
						
							
			                <p:column headerText="Descripción" >
								<h:outputText
									value="#{vElemVoucherDet.description}"																																		
									>												
								</h:outputText>	
			                </p:column>			              
			                
					        <p:columnGroup type="footer"  rendered="false" >
					            <p:row>	    
									<p:column colspan="2" style="text-align:right; font-weight:bold; 
										border-top-color: #555 !important; border-top-width: 2px !important;" 
					                	footerText="Líneas: "	>					                	
					                 </p:column>   
					                 <p:column style="font-size: 14px;font-weight: bold;
					                 	border-top-color: #555 !important; border-top-width: 2px !important;"
					                	footerText = "#{voucherBean.listaVoucherDetalleReg.size()}" >					                	
					                 </p:column>    
					                <p:column colspan="2" style="text-align:right; font-weight:bold;
					                	border-top-color: #555 !important; border-top-width: 2px !important;"
					                	footerText="Total Moneda Local:"	>					                	
					                 </p:column>							                
					                <p:column style="font-size: 14px;font-weight: bold; color: :#284A89 !important;
					                	border-top-color: #555 !important; border-top-width: 2px !important;"
					                	footerText = "#{voucherBean.valSumaMontoDetalleLocalDebe}" >		
					                	<h:outputText
												value="#{voucherBean.valSumaMontoDetalleLocalDebe}"																																		
												>												
										</h:outputText>				                	
					                 </p:column>
					                <p:column style="font-size: 14px;font-weight: bold; color: :#990000  !important;	
					                	border-top-color: #555 !important; border-top-width: 2px !important;"
					                	footerText = "#{voucherBean.valSumaMontoDetalleLocalHaber}" >					                	
					                 </p:column>					                 
					               	<p:column colspan="2"  
					               		style="border-top-color: #555 !important; border-top-width: 2px !important;"
					                	footerText=""	>					                	
					                 </p:column>	
					                 <p:column style="font-size: 15px;font-weight: bold; 
					                 	border-top-color: #555 !important; border-top-width: 2px !important;"
					                	footerText = "#{voucherBean.valSumaMontoDetalleLocal}" >					                	
					                 </p:column>	                
				        	</p:row>
					            <p:row>	    								 
					                <p:column colspan="5" style="text-align:right; font-weight:bold;" 
					                	footerText="Total Moneda Dólar:"	>					                	
					                 </p:column>							                
					               <p:column colspan="2"  
					                	footerText=""	>					                	
					                 </p:column>				                 
					                <p:column style="font-size: 14px;font-weight: bold; color: :#284A89 !important;"
					                	footerText = "#{voucherBean.valSumaMontoDetalleExtDebe}" >					                	
					                 </p:column>
					                <p:column style="font-size: 14px;font-weight: bold; color: :#990000 !important;"
					                	footerText = "#{voucherBean.valSumaMontoDetalleExtHaber}" >					                	
					                 </p:column>					                 
					 				<p:column style="font-size: 15px;font-weight: bold; "
					                	footerText = "#{voucherBean.valSumaMontoDetalleExt}" >					                	
					                 </p:column>	              
				        	</p:row>				        	
				        </p:columnGroup>	
				        
				       		 <f:facet name="footer">
				       		 	
								<div class="customHr"  style="    line-height: 3px;" >.</div>	
								<p:panelGrid  id="pgResumenDetalleLocal" layout="grid" styleClass="ui-panelgrid-blank" 
										columns="7" columnClasses="ui-grid-col-1,ui-grid-col-2,
										ui-grid-col-2,ui-grid-col-2,ui-grid-col-2,ui-grid-col-1,ui-grid-col-2">
																																			
										<p:spacer width="5"></p:spacer>
										<p:outputLabel value="Total Líneas: #{voucherBean.listaVoucherDetalleReg.size()} "
											>
										</p:outputLabel>										
										<p:outputLabel value="Total Moneda Local: "
											>
										</p:outputLabel>
										<p:outputLabel styleClass="colTableStyleBlue01"	style="font-weight:bold;"																	
												value="#{voucherBean.valSumaMontoDetalleLocalDebe}"
												>
											<f:convertNumber pattern="#{label.PATTERN_NUM_2DEC}" locale="en"/>
										</p:outputLabel>
										<p:outputLabel styleClass="colTableStyleRed01"	style="font-weight:bold;"																	
												value="#{voucherBean.valSumaMontoDetalleLocalHaber}"
												>
											<f:convertNumber pattern="#{label.PATTERN_NUM_2DEC}" locale="en"/>
										</p:outputLabel>
										<p:outputLabel	style="font-weight:bold;"																	
												value="#{voucherBean.valSumaMontoDetalleLocal}"
												>
											<f:convertNumber pattern="#{label.PATTERN_NUM_2DEC}" locale="en"/>
										</p:outputLabel>
										<p:spacer width="10"></p:spacer>																		
																									
								</p:panelGrid>		
								<p:panelGrid id="pgResumenDetalleExt" layout="grid" styleClass="ui-panelgrid-blank" 
										columns="7" columnClasses="ui-grid-col-1,ui-grid-col-2,
										ui-grid-col-2,ui-grid-col-2,ui-grid-col-2,ui-grid-col-1,ui-grid-col-2">
																																			
										<p:spacer width="5"></p:spacer>
										<p:spacer width="5"></p:spacer>										
										<p:outputLabel value="Total Moneda Dólar: "
											>
										</p:outputLabel>
										<p:outputLabel	styleClass="colTableStyleBlue01" style="font-weight:bold;"																	
												value="#{voucherBean.valSumaMontoDetalleExtDebe}"
												>
											<f:convertNumber pattern="#{label.PATTERN_NUM_2DEC}" locale="en"/>
										</p:outputLabel>
										<p:outputLabel	styleClass="colTableStyleRed01" style="font-weight:bold;"																												
												value="#{voucherBean.valSumaMontoDetalleExtHaber}"
												>
											<f:convertNumber pattern="#{label.PATTERN_NUM_2DEC}" locale="en"/>
										</p:outputLabel>
										<p:outputLabel	style="font-weight:bold;"																	
												value="#{voucherBean.valSumaMontoDetalleExt}"
												>
											<f:convertNumber pattern="#{label.PATTERN_NUM_2DEC}" locale="en"/>
										</p:outputLabel>
										<p:spacer width="10"></p:spacer>																		
																									
								</p:panelGrid>													       		 
				       		 </f:facet>			            				        
					</p:dataTable>
							
			</p:fieldset>

		
			<p:fieldset legend="Información Referencial"   toggleable="true" toggleSpeed="500" >																					
						
				<div id="divConfigVoucherInfoRef"  class="ui-g">
					<div class="ui-g-12 ui-g-nopad">
						<div class="ui-fluid">												
										
							<p:panelGrid  layout="grid" styleClass="ui-panelgrid-blank" columns="2"
								columnClasses="ui-grid-col-6,ui-grid-col-6"								
							>							
								<p:column >	
									<p:outputLabel  styleClass="estiloLabelForm" 
									value="Preparado por"/>																
									<p:panelGrid  layout="grid" 
										styleClass="ui-panelgrid-blank"  columns="3"
										 style="margin-left:-10px; margin-top:-5px;margin-bottom:-5px;"
										columnClasses="ui-grid-col-7,ui-grid-col-1,ui-grid-col-4"
										>	
										<p:outputLabel																			
											value="#{voucherBean.preparadoPorDesc}"										
											styleClass="estiloValueForm"																
											>
										</p:outputLabel>	
										<p:outputLabel																			
											value="|" styleClass="estiloValueForm"																
											>
										</p:outputLabel>											                                    																														
										<p:outputLabel
											value="#{voucherBean.registro.prepareddate}"
											styleClass="estiloValueForm" 
											>
											<f:convertDateTime pattern="dd/MM/yyyy" locale="es"/>
										</p:outputLabel>																																		
									</p:panelGrid>	
									
									<p:outputLabel  styleClass="estiloLabelForm" 
									value="Última Modificación"/>																
									<p:panelGrid  layout="grid" 
										styleClass="ui-panelgrid-blank"  columns="3"
										 style="margin-left:-10px; margin-top:-5px;margin-bottom:-5px;"
										columnClasses="ui-grid-col-7,ui-grid-col-1,ui-grid-col-4"
										>	
										<p:outputLabel																			
											value="#{voucherBean.registro.lastuser}"											
											styleClass="estiloValueForm"																
											>
										</p:outputLabel>	
										<p:outputLabel																			
											value="|" styleClass="estiloValueForm"																
											>
										</p:outputLabel>
										<p:outputLabel
											value="#{voucherBean.registro.lastdate}"
											styleClass="estiloValueForm" 
											>
											<f:convertDateTime pattern="dd/MM/yyyy" locale="es"/>
										</p:outputLabel>																																		
									</p:panelGrid>	
																										
								</p:column>
								<p:column >
									<p:outputLabel  styleClass="estiloLabelForm" 
									value="Aprobado por"/>																
									<p:panelGrid  layout="grid" 
										styleClass="ui-panelgrid-blank"  columns="3"
										 style="margin-left:-10px; margin-top:-5px;margin-bottom:-5px;"
										columnClasses="ui-grid-col-7,ui-grid-col-1,ui-grid-col-4"
										>	
										<p:outputLabel																			
											value="#{voucherBean.aprobadoPorDesc}"
											styleClass="estiloValueForm"																
											>
										</p:outputLabel>	
										<p:outputLabel																			
											value="|" styleClass="estiloValueForm"																
											>
										</p:outputLabel>
										<p:outputLabel
											value="#{voucherBean.registro.approveddate}"
											styleClass="estiloValueForm" 
											>
											<f:convertDateTime pattern="dd/MM/yyyy" locale="es"/>
										</p:outputLabel>																																		
									</p:panelGrid>	
								</p:column>
							</p:panelGrid>
							
						</div>
					</div>
				</div>
			</p:fieldset>				
</p:outputPanel>	
</ui:composition>
